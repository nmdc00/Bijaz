# v1.8 Paper Engine: Learning-First Dual Books

## Goal
v1.8 upgrades paper mode from a thin simulation into a learning engine that uses the same `perp_*` interface as live execution while keeping real capital isolated.

## Scope
1. Same interface, dual execution books:
- `perp_place_order`, `perp_cancel_order`, `perp_open_orders`, `perp_positions` remain unchanged.
- Calls route to `paper` by default; `live` is opt-in.

2. Isolated ledgers:
- Live book remains exchange-native (Hyperliquid account state).
- Paper book persists virtual cash, virtual positions, open orders, and fills.
- Paper bankroll initializes at `200 USDC` by default.

3. Tight learning data:
- Each paper order/fill is journaled with signal fields, fees, and outcome metadata.
- Paper execution tracks slippage proxy and realized PnL into a persistent local book.

4. Promotion gates (paper -> live):
- Mechanical gate checks:
  - minimum sample count
  - maximum drawdown (R)
  - minimum hit rate
  - minimum payoff ratio
  - minimum expectancy (R)
- New tool: `paper_promotion_report`

## Config
```yaml
execution:
  mode: paper

paper:
  enabled: true
  initialCashUsdc: 200
  defaultMode: paper
  requireExplicitLive: true
  liveSymbolsAllowlist: [BTC, ETH]
  promotionGates:
    minTrades: 25
    maxDrawdownR: 6
    minHitRate: 0.5
    minPayoffRatio: 1.2
    minExpectancyR: 0.1
```

## Behavior Contract
1. If `execution.mode: paper`, paper book is active automatically.
2. Live trading only occurs when mode is explicitly routed to live and policy permits symbol.
3. Paper state is persisted locally and survives process restarts.
4. Promotion decisions are reproducible from journaled trade data.

## Acceptance Criteria
1. Placing/canceling paper orders updates persistent open-orders and position state.
2. `get_portfolio` and `perp_positions` in paper mode show paper book balances/positions.
3. Paper book starts with `200 USDC` when empty.
4. `paper_promotion_report` returns deterministic pass/fail gate output.
