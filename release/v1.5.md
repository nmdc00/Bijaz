# Release v1.5 - Product Direction

Date: 2026-02-17  
Status: Draft (planning)

## Why v1.5

v1.4 established scheduler primitives, proactive search, and autonomous scanning, but Thufir is still perceived as chat-reactive unless the background path is explicitly configured and hardened.

v1.5 converts Thufir into an always-on autonomous operator that can detect, decide, and notify without user-initiated chat.

## v1.5 Core Objective

Make Thufir operationally autonomous by default:

1. Run a dedicated background worker loop continuously.
2. Trigger actions/alerts from deterministic policy, not chat prompts.
3. Send outbound notifications on meaningful events with strict anti-spam controls.
4. Keep execution and alerting resilient under LLM degradation.

## Included Epic

1. Autonomous Outbound Worker Loop Epic  
   See: `release/v1.5-autonomous-worker-loop.md`
2. Trade-Management Control Loop Epic
   See: `release/v1.5-trade-contract-control-loop.md`

## Release-Critical Priorities

1. Daily P&L drawdown cap gate in autonomous pre-trade policy (hard stop when breached).
2. Consolidate session-weight logic into one shared source of truth used by autonomous + mentat flows.
3. Wire `/delphi` predictions to real market/signal inputs (keep non-executing until calibration proves quality).
4. Verify context-pack influence with measurable outcome deltas; do not treat context fields as complete unless they improve decisions.
5. Add mechanical decision-component labeling per closed trade:
- direction score (thesis correctness),
- timing score (entry proximity to local extremum),
- sizing score (size vs measured edge),
- exit score (captured move quality vs available move).
6. Add a background-operator `/status` command surface (single Telegram-ready snapshot):
- equity,
- open positions with P&L,
- policy state,
- last trade outcome,
- next scan time,
- uptime,
- daily P&L.
7. Add deterministic trade-contract execution controls:
- enforce entry-time trade contracts (archetype, invalidation, time stop, TP/trail plan),
- route exits through reason-coded FSM transitions (not discretionary PnL-driven exits),
- downshift/block segments mechanically from rolling decision-component scores.

## Non-Goals (v1.5)

1. No migration to an LLM-only decision path for alert triggering.
2. No removal of existing gateway/chat functionality.
3. No requirement that every background signal produces a notification.
4. No LLM authority over exit execution decisions.

## Success Criteria

1. Background loop runs continuously without chat input.
2. At least one deterministic alert class can be triggered and delivered end-to-end in staging.
3. Duplicate alert suppression and cooldown logic prevent repeated spam for the same condition.
4. If LLM calls fail, critical alerts still send with mechanical fallback text.
5. Autonomous policy blocks new trades when daily drawdown cap is exceeded.
6. `/delphi` no longer relies on placeholder symbol-scoring heuristics.
7. Trade journal records direction/timing/sizing/exit component scores for closed trades.
8. `/status` returns a concise single-message runtime + risk snapshot suitable for background ops.
9. New entry orders can be rejected when required trade-contract fields are missing under enforcement mode.
10. Closed trades include machine-computed attribution that supports edge-leak analysis (captured vs left-on-table R).
