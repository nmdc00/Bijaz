# Release v1.5 Planner

Date: 2026-02-17  
Base Branch: `develop`  
Release Branch: `release/v1.5`

## Scope Guardrails

1. One feature branch per task, one PR per feature branch.
2. Drawdown hard gate ships before unattended autonomous operation.
3. Triggering/alerting remains mechanical-first; LLM enrichment is optional and non-blocking.
4. Every task branch must include tests for newly introduced behavior.

## Task Branch Strategy

1. `feat/v1.5-worker-service-entrypoint`
2. `feat/v1.5-trigger-engine-core`
3. `feat/v1.5-notification-policy-dedupe-cooldown`
4. `feat/v1.5-alert-delivery-adapters`
5. `feat/v1.5-llm-enrichment-fallback`
6. `feat/v1.5-alert-persistence-lifecycle`
7. `feat/v1.5-worker-config-schema`
8. `feat/v1.5-drawdown-hard-gate`
9. `feat/v1.5-session-weight-consolidation`
10. `feat/v1.5-delphi-real-signal-integration`
11. `feat/v1.5-context-pack-effectiveness-eval`
12. `feat/v1.5-decision-component-labeling`
13. `feat/v1.5-status-command-snapshot`
14. `feat/v1.5-worker-e2e-acceptance`

## Agent Assignment

1. Agent A
- `feat/v1.5-worker-service-entrypoint`
- `feat/v1.5-alert-persistence-lifecycle`
- `feat/v1.5-worker-config-schema`

2. Agent B
- `feat/v1.5-trigger-engine-core`
- `feat/v1.5-notification-policy-dedupe-cooldown`
- `feat/v1.5-alert-delivery-adapters`

3. Agent C
- `feat/v1.5-drawdown-hard-gate`
- `feat/v1.5-session-weight-consolidation`
- `feat/v1.5-status-command-snapshot`

4. Agent D
- `feat/v1.5-delphi-real-signal-integration`
- `feat/v1.5-context-pack-effectiveness-eval`

5. Agent E
- `feat/v1.5-decision-component-labeling`
- `feat/v1.5-llm-enrichment-fallback`
- `feat/v1.5-worker-e2e-acceptance`

## Test Coverage Requirements (Per Branch)

1. `feat/v1.5-worker-service-entrypoint`
- Unit: worker bootstrap lifecycle and shutdown hooks.
- Integration: systemd/CLI entrypoint smoke in test harness.

2. `feat/v1.5-trigger-engine-core`
- Unit: threshold crossing and state reset for all trigger classes.
- Integration: deterministic trigger stream over fixture market/account data.

3. `feat/v1.5-notification-policy-dedupe-cooldown`
- Unit: dedupe key generation, cooldown suppression, severity routing.
- Integration: repeated incident simulation proves one-send-many-suppressions.

4. `feat/v1.5-alert-delivery-adapters`
- Unit: adapter payload formatting and retry policy.
- Integration: simulated 429/5xx with eventual send success/failure persistence.

5. `feat/v1.5-llm-enrichment-fallback`
- Unit: timeout and exception fallback branch.
- Integration: LLM outage still sends mechanical critical alert.

6. `feat/v1.5-alert-persistence-lifecycle`
- Unit: state transition validation (`open`, `suppressed`, `sent`, `resolved`).
- Integration: migration + end-to-end persistence assertions.

7. `feat/v1.5-worker-config-schema`
- Unit: schema validation and defaulting.
- Integration: startup failure for invalid config and success for valid config.

8. `feat/v1.5-drawdown-hard-gate`
- Unit: gate behavior below/at/above drawdown threshold.
- Integration: no new entries after breach; reduce-only still permitted.

9. `feat/v1.5-session-weight-consolidation`
- Unit: shared module session mapping matrix.
- Integration: autonomous/mentat parity assertions from same timestamps.

10. `feat/v1.5-delphi-real-signal-integration`
- Unit: prediction inputs derived from real signals.
- Integration: same symbol, different signal states => materially different outputs.

11. `feat/v1.5-context-pack-effectiveness-eval`
- Unit: context-pack prompt injection and toggle path.
- Integration: offline A/B evaluation artifacts generated in CI fixture run.

12. `feat/v1.5-decision-component-labeling`
- Unit: direction/timing/sizing/exit score formulas.
- Integration: closed-trade fixtures persist all component scores.

13. `feat/v1.5-status-command-snapshot`
- Unit: formatter and field fallback behavior.
- Integration: one-message status output contains required fields and size bounds.

14. `feat/v1.5-worker-e2e-acceptance`
- Integration: end-to-end flow trigger -> policy -> delivery -> persistence.
- Regression: v1.4 acceptance suite plus v1.5 worker acceptance suite.

## Merge Order

1. `feat/v1.5-worker-service-entrypoint`
2. `feat/v1.5-worker-config-schema`
3. `feat/v1.5-trigger-engine-core`
4. `feat/v1.5-notification-policy-dedupe-cooldown`
5. `feat/v1.5-alert-delivery-adapters`
6. `feat/v1.5-alert-persistence-lifecycle`
7. `feat/v1.5-drawdown-hard-gate`
8. `feat/v1.5-session-weight-consolidation`
9. `feat/v1.5-delphi-real-signal-integration`
10. `feat/v1.5-context-pack-effectiveness-eval`
11. `feat/v1.5-decision-component-labeling`
12. `feat/v1.5-status-command-snapshot`
13. `feat/v1.5-llm-enrichment-fallback`
14. `feat/v1.5-worker-e2e-acceptance`

## Branch Validation Gate

Run before opening any PR:

```bash
/home/nmcdc/.codex/skills/agile-sprint-branching/scripts/check_feature_branches.sh \
  --base origin/release/v1.5 \
  --pattern 'origin/feat/v1.5-*'
```

## Exit Criteria

1. All v1.5 task branches merged into `release/v1.5`.
2. Drawdown hard gate blocks autonomous entries once breached.
3. Closed trades include all decision component scores.
4. `/status` returns one-message operator snapshot in Telegram-safe format.
5. Worker E2E suite and full regression suite are green.
