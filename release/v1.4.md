# Release v1.4 - Product Direction

Date: 2026-02-17  
Status: Draft (pre-implementation)

## Why v1.4

v1.3 improved execution quality, but three core trader gaps remain:

1. Background autonomy is not productized as a reliable operator control plane.
2. Scan/trade logic is not session-aware (Asia/Europe/US structure is ignored).

Two additional high-value additions are now in scope:

3. Prediction calibration under a dedicated `/delphi` command so edge can be measured before capital is scaled.
4. Time-sensitive market answers can be stale if no pre-answer refresh is enforced.

## v1.4 Objectives

1. Run safely in the background with deterministic scheduling, persistence, and escalation.
2. Add `sessionContext` to scans and weight signal quality by session, not just raw indicators.
3. Add explicit, non-trading forecasts behind `/delphi`, with automatic outcome resolution and calibration analytics.
4. Increase decision context (regime, execution quality, event, portfolio state) so reasoning is better grounded.
5. Enforce proactive freshness checks for time-sensitive prompts before regime or macro conclusions are returned.

## Scope Pillars

## 1) Background Autonomy Control Plane

- First-class job scheduler for recurring tasks (`scan`, `heartbeat`, `intel-fetch`, `alerts`, `daily-report`).
- Persistent job metadata (last run, next run, failures, state).
- Operator escalation on actionable conditions (risk breach, stop failure, abnormal slippage, high-conviction setup).
- Reliability controls: lock/lease, backoff, and circuit-breaker behavior.

## 2) Session-Aware Intelligence

- Introduce `sessionContext` in every scan:
  - `session`: `asia | europe_open | us_open | us_midday | us_close | weekend`
  - `liquidityRegime`: `thin | normal | deep`
  - `qualityNotes`: short text guidance for expected signal quality
  - `sessionWeight`: numeric multiplier used by scoring/sizing logic
- Do not hard-block by session; adjust confidence and risk sizing.

## 3) `/delphi` Prediction and Calibration Engine

- Add a dedicated `/delphi` command namespace for forecasts and analytics.
- Every scheduled/manual delphi run emits explicit predictions with probabilities and horizons.
- Predictions are tracked and resolved automatically at horizon expiry.
- Calibration analytics answer:
  - Is Thufir over/underconfident?
  - Which contexts have edge (session, regime, strategy class, symbol, horizon)?

## 4) Broader Decision Context

- Regime context: trend/chop/volatility state.
- Execution context: spread, depth, estimated slippage, recent fill quality.
- Event context: macro window/catalyst overlays.
- Portfolio context: concentration, correlation cluster, drawdown state.

## 5) Proactive Freshness Guard for Time-Sensitive Answers

- Detect time-sensitive prompts (`latest`, `today`, `this week`, `bull/bear`, macro regime asks).
- Run pre-answer refresh in parallel for market structure, funding/OI skew, and top headlines.
- Apply freshness TTL caching so follow-up questions do not always pay full latency cost.
- Fail closed when refresh is required but unavailable (no stale confident answer).
- Stamp responses with `as_of` time and source summary when proactive refresh is used.

## `/delphi` Product Contract

`/delphi` is prediction-first and non-executing by default.

- Generates forecasts like: "ETH will be below 1950 in 24h, 65% confidence."
- Stores prediction artifacts even when no trade is placed.
- Can be invoked manually and via scheduler jobs.
- Does not require order placement permissions.

## Non-Goals (v1.4)

- No mandatory session-based trade bans.
- No full redesign of all existing agent modes.
- No requirement to tie every prediction to a trade.
- No always-on high-frequency polling requirement in the first proactive freshness iteration.

## Success Metrics

1. Background jobs survive process restarts and resume safely.
2. Session-aware fields are present in scan artifacts and influence scoring.
3. At least 100 resolved `/delphi` predictions can be queried with calibration outputs.
4. Segment-level calibration reports exist for session, regime, horizon, and symbol.
5. Risk policy can consume calibration status to reduce size in weak segments.
6. Time-sensitive macro/regime answers include fresh data attribution (`as_of` + sources) or fail closed.

## v1.4 Latency Extension (Develop Track)

To improve execution timeliness without weakening risk controls, `develop` adds a
latency-focused extension on top of v1.4 release scope:

1. Remove blocking LLM expression-selection from the final execution gate.
2. Add shared market-data caching so scans read pre-fetched snapshots.
3. Trigger scans from market anomalies (event-driven), not only fixed intervals.
4. Improve IOC pricing inputs with fresher quote data.

Design guardrails:
- Keep LLM usage for thesis/rationale and post-decision analysis.
- Keep policy engine as the deterministic execution gate.
- Preserve v1.4 risk controls and calibration-aware policy behavior.

See:
- `release/v1.4-latency-epic.md`
- `release/v1.4-latency-planner.md`
- `release/v1.4-latency-checklist.md`
